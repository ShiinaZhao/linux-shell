## 文件管理与常用命令

### 文件及其文件管理
---
#### 文件类型
> 所有的都是文件，文件后缀没有意义
```
类型 | 简称 | 描述
普通文件  -  可以根据权限对普通文件查看、更改、删除，包括纯文本、二进制、数据格式、压缩文件等，第一个属性为-
目录文件  d  目录文件包括各自目录下的文件名和指向文件名的指针，只要有权限就能访问目录下所有文件，打开目录文件就是打开目录（cd命令），第一个属性为d
硬链接    -  硬链接就是同一文件使用了多个别名删除时，只会删除链接，不会删除文件。局限为不能引用其他分区的文件，不能引用目录。
符号链接  l  又名软链接。存放的内容是另一文件的路径名，类似快捷方式。
字符设备文件  c  一般隐藏在/dev目录下，用作设备读取和外设交互，第一个属性为c
块设备文件    b  存储数据供系统存取的接口设备，硬盘光驱等。设备文件只有字符设备和块设备，第一个属性为b
fifo管道文件  p  用于进程间通讯，解决多个程序同时存取一个文件造成的错误，启动进程A从fifi读数据，启动进程B从fifo写数据，先进先出，随写随读。
套接字        s  监听客户端时，客户端通过套接字进行数据通信，一般隐藏在/var/run下，第一个属性为s
```

#### 文件命名规则
> 1-256字符，字母数字点下划线连字符
```
尽量不要使用？?、*、$、&、！、|、\、[]、{}、()、/等，'.'开头为隐藏文件。
文件名区分大小写
```

#### 目录操作命令
> pwd
```
功能: 显示当前目录绝对路径
格式: pwd
```

> cd
```
功能: 改变当前所在目录
格式: cd 目录名
```

> mkdir
```
功能: 创建目录
格式: mkdir [选项] 目录名
常用选项:
-m 数字: 设置存取权限
-p: 若父目录不存在，则同时创建父目录与该目录
```

> rmdir
```
功能: 删除目录（必须为空目录）
格式: rmdir [选项] 目录名
常用选项:
-p 删除目录时一同删除父目录，前提是父目录中无其他目录及文件
```
> ls
```
功能: 显示文件和目录列表
格式: ls [选项] [目录名或文件名]
常用选项:
-a 列出包含隐藏文件('.')的所有文件
-b 文件名中不可输出的字符用反斜杠加字符编号来输出
-d 将目录像文件一样显示，不显示其包含的文件
-e 输出时间的全部信息，而不是简略信息
-k 以k字节的形式显示文件大小
-l 列出文件详细信息
-m 横向输出文件名,end=','
-n 以UID、GID代替名称
-p/-F 每个文件后附上字符说明类型，'*'可执行普通文件，'/'目录，'@'符号链接，'|'FIFOS，'='套接字
-r 对目录反向排序
-s 文件名后输出文件大小
-t 按文件最后修改时间排序
-u 按上次文件被访问的时间排序
-x 按列输出，横向排序
-l 一行只输出一个文件
--color=no 不显示彩色文件名
```
#### 文件操作命令
> cat
```
功能: 显示一个或多个文件的内容
格式: cat [选项] 文件名
常用选项:
-n 对输出行数编号
-b 对输出行数编号，但不对空白行编号
-s 遇到连续两行以上空白行，代换为一行空白行
e.g. cat file2 file1>file3 //把file2 file1文件内容按顺序合并为file3（如file3已存在，则覆盖掉）
e.g. cat >filename <<EOF
```
> head
```
功能: 显示文件开头，默认前十行
格式: head [选项] 文件名
常用选项:
-n num 显示文件的前num行
-c num 显示文件的前num个字符
```
> tail
```
功能: 显示文件末尾，默认后十行
格式: tail [选项] 文件名
常用选项:
-n num 显示文件后num行
-c num 显示文件后num个字符
```
> more
```
功能: 分屏显示文件内容
格式: more [选项] 文件名
常用选项:
-d 提示使用者
-f 计算实际行数
-p 不卷动，显示新内容时清除屏幕
-c 同上，但先显示内容再清除
-s 遇到连续两行以上空白行，代换为一行空白行
-u 不显示下引号
+/ 从该字串开始显示
-num 指定屏幕上一次显示的行数
+num 从第num行开始显示
常用指令:
空格  向下翻页
Enter 向下一行
q     终止浏览文件
```
> less
```
功能: 分屏显示文件内容
格式: less [option] filename
常用选项:
-a 在当前屏幕显示最后一页
-c 从顶部（从上到下）刷新屏幕，并显示文件内容，而不是通过底部滚动完成刷新
-f 强制打开文件，二进制文件显示时，不提示警告
-s 遇到连续两行以上空白行，代换为一行空白行
常用指令:
空格 翻页
pagedown/pageup 翻行
/               向下搜寻字符串
g/G             到文件第一行/最后一行
q               离开
```
> touch
```
功能: 生成新文件、更改现有文件时间标签
格式: touch [option] filename
常用选项:
-a 改变文件的读取时间标签
-c 假如目的文件不存在，不会建立新的文件
-m 改变文件的修改时间标签
-d 设定时间与日期，可以使用各种不同的格式，如-d yyyymmdd
-r 指定使用文件属性而非目前的时间
--nocreate 不会建立新文件
--version 列出版本信息
```
> sort
```
功能: 对文本文件每行进行排序
格式: sort [option] 文件列表
常用选项:
-b 忽略每行前面开始出的空格字符
-c 检查文件是否已经按照顺序排序
-d 排序时，处理英文字母、数字及空格字符外，忽略其他的字符
-f 排序时，将小写字母视为大写字母
-i 排序时，只排序可打印字符，忽略其他的字符
-m 将几个排序好的文件进行合并
-M 将前面3个字母依照月份的缩写进行排序
-n 依照数值的大小排序
-o<输出文件> 将排序后的结果存入指定的文件
-r 以相反的顺序来排序
-t<分隔字符> 指定排序时所用的栏位分隔字符
+<起始栏位> -<结束栏位> 以指定的栏位来排序，范围由起始栏位到结束栏位的前一栏位
```
> diff
```
功能: 比较文件的不同
格式: diff [option] 源文件 目标文件
常用选项:
-a 将文件按照文本文件处理
-b 忽略空格
-B 忽略空行
-q 只报告哪里不同，不报告不同信息
-i 忽略大小写
```
> cp
```
功能: 复制文件或目录
格式: cp [option] 源文件/目录 目标文件/目录
常用选项:
-a 尽可能文件状态、权限等原状复制
-f 若目标存在，先删除再复制
-i 若目标存在，提示是否覆盖
-r 递归复制目录，包含各级子目录
```
> rm
```
功能: 删除文件或目录
格式: rm [option] 文件列表
常用选项:
-i 删除文件或目录时提示
-f 删除文件或目录时不提示
-R 递归删除目录，包含文件和各级子目录
```
> mv
```
功能: 移动文件或目录、重命名文件或目录
格式: mv [option] 源文件/目录 目标文件/目录
常用选项:
-i 若目标存在，则提示是否覆盖
-f 无论目标是否存在，都直接覆盖
```
> wc
```
功能: 统计文件的字节数、字数、行数
格式: wc [option] filename
常用选项:
-c 统计字节数
-l 统计行数
-m 统计字符数
-w 统计字数
```
### Linux 文件权限
---
#### 用户与用户组
> 权限基于三类用户设定
* 文件拥有者（user）
* 组用户（group）
* 其他（others）

```root用户不受权限控制```
#### 文件权限概述
> 根据赋予权限的不同，3种不同用户能访问不同目录或文件
* 所有者是创建文件的目录，能授予所在用户组及组外其他用户文件访问权限
* 每一个用户都有自己的读写和执行的权限
#### 文件属性概览
> **-rwxr-xr-x 2 root root 4096 June 3 23:59 brave.sh**
* 文件类型权限
```
第一个字符是文件类型，d、-、l等
2-10个字符为访问权限，每三个一组，
第一组为**所有者权限** (u)
第二组为**同组其他用户的权限** (g)
第三组为**其他用户的权限** (o)
r读取，w写入，x执行，-无此权限
```
* 表示有多少文件名连结到此节点（i-node）
```
每个文件都会将其权限和属性记录到文件系统的i-node中，
但目录树用文件记录，因此文件名会连接i-node
此处就是有多少不同文件名连接到了相同的i-node
```
* 拥有者账号
* 文件所属群组
```
账号会附属于一个或多个群组，权限问题
```
* 容量大小，默认bytes
* 创建日期或最近修改日期
```
一般为月日时间，但如果时间太久，只显示年份
完整时间格式 ls -l --full-time
```
* 文件名
#### 权限概述
> 文件权限
* r(read)    可读取文件实际内容
* w(write)   可编辑、新增或修改文件内容（但不含删除文件）
* x(execute) 可以被系统执行
> 目录权限
* r(read)    可查看目录结构，查询目录下文件名
* w(write)   建立新文件和目录，传出已存在文件或目录，更名文件目录，搬移该目录内文件、目录位置
* x(execute) 能否进入该目录工作
```
权限不足，用root(sudo)，或修改文件权限
```
#### 权限修改
> **chmod [option] filename**
* 数字表示法
```
rwx分别为421
rw-rw-r--:664
因此命令为: chmod 664 filename
```
* 文字表示法
```
用户表示: u g o a(all)
权限表示: r w x
操作符号: + - =
e.g. chmod u=rwx g=rx o=x filename
```
#### 文件所有者与属组修改
> chmod 选项 要修改成的所有者和属组 文件

```仅root用户```
* 所有者和属组都改为test
```
chmod test:test filename
```
* 仅修改所有者
```
chmod test filename
```
* 仅修改属组
```
chmod :test filename
or
chgrp test filename
```
#### 文件默认权限
> 
